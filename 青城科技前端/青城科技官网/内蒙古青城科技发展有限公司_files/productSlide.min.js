Site.productSlide={};(function(I,S,n){var w,J=-1,T,k,an,aj=null,f="",aa="",F,O,t,r,h,C,g=82;S.data={};S.dom={};var W=Fai.top._lcid==2052||Fai.top._lcid==1028;function D(){var ap=[];ap.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">');ap.push('	<div class="f-contentBg J_contentBg"></div>');ap.push('	<div class="f-content J_content" id="fk-productSlideContent">');ap.push('		<div class="f-innerContent">');ab(ap);ap.push("		</div>");ap.push('		<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>');ap.push('		<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>');ap.push('		<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>');ap.push("	</div>");ap.push("</div>");return ap}function ab(ap){ap.push('<div class="f-multiContent J_multiContent">');H(ap);ap.push("</div>");ap.push('<div class="f-albumsContent J_albumsContent">');A(ap);ap.push("</div>")}function H(ap){ap.push('<div class="f-multiContent-left J_multiContentLeft">');G(ap);ap.push("</div>");ap.push('<div class="f-multiContent-right J_multiContentRight">');X(ap);ap.push("</div>")}function G(ap){ap.push('<div class="f-productPicContent J_productPicContent">');ap.push('	<div class="f-productImg J_productImg">');ap.push('		<div class="f-productImgLoading"></div>');ap.push("	</div>");ap.push('	<div class="f-productImgGroup J_productImgGroup" style="display:none;">');ap.push('		<div class="f-productImgGroupBg"></div>');ap.push('		<div class="f-imgListWrap J_imgListWrap">');ap.push("		</div>");ap.push('		<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>');ap.push('		<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>');ap.push("	</div>");ap.push("</div>");ap.push('<div class="f-shareContent J_shareContent">');ap.push("</div>")}function X(ap){ap.push('<div class="f-productDetailContent J_productDetailContent">');ap.push("</div>");ap.push('<div class="optionMsg"></div>');ap.push('<div class="f-productBuyContent J_productBuyContent">');ap.push("</div>")}function R(){if(!S.data.nowData){return""}var aO=[],aG=[],bf=S.data,a2=bf.nowData,bk=a2.propList||[],aP=typeof(a2.saleId)!="undefined"?a2.saleId:0,aD=typeof(a2.salePromotion)!="undefined"?a2.salePromotion:[],aW="g_stress mallPriceBig f-mallPriceWrap",aV="g_minor mallMarketPrice f-mallPriceWrap",az="",bd="",av=false,ay=false,a4=false,a9="",ap="",aM,aE,bl,aY,a1,aF,bc,aH,aI;C=(O<100&&O>1);if(t){if("discount" in a2){O=a2.discount}else{O=100}C=(O<100&&O>1)}if(aD!=null||aD!=[]){av=true;ay=Q(bk);if(ay==true){a4=N(aD,false);if(a4){C=false;aG.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">');aG.push("<table>");aG.push("<tr>");aG.push("<td>");aG.push('<div class="showSaleTimeImg fk-showSaleTimeImg">');aG.push("</div>");aG.push("</td>");aG.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">');aG.push("</td>");aG.push("</tr>");aG.push("</table>");aG.push("</div>")}}}if(typeof(a2.salePromotion)!="undefined"){C=false}aM=a2.name;aH=bk.length;for(bc=0;bc<aH;bc++){aI=bk[bc];aE=aI.name;bl=aI.type;aY=aI.fileId;a1=aI.value||"";if(I.trim(a1).length<1){continue}if(bl==11&&C){az=aV;bd=aW}else{if(bl==11&&!C){az=aW}else{if(bl==12){az=aV}else{az=""}}}if(bl==11&&C){a9="";ap="J_mallPriceClass"}else{if(bl==11&&!C){a9="J_mallPriceClass"}else{a9=""}}aG.push('<div class="f-propContent '+a9+'">');aG.push('<div class="f-propName" title="'+aE+'" style="width:'+g+'px">'+aE+'<span class="f-colon">:</span></div>');aG.push('<div class="f-propValue '+az+'">');if(bl==11){aG.push('	<span class="f-currencyVal">'+an.choiceCurrencyVal+"</span>");if(C){aG.push('	<span class="mallPrice J_realMallAmount">'+(W?a1:Fai.formatPriceEn(a1))+"</span>");aG.push("	</div>");aG.push("</div>");aG.push('<div class="f-propContent '+ap+'">');aG.push('<div class="f-propName" title="'+aE+'" style="width:'+g+'px">'+r+'<span class="f-colon">:</span></div>');aG.push('<div class="f-propValue '+bd+'">');aG.push('<span class="f-currencyVal">'+an.choiceCurrencyVal+"</span>");var bh="";if(a1.indexOf("~")>=0){var at=a1.split("~");var bg=parseFloat(at[0])*O*0.01,ax=parseFloat(at[1])*O*0.01;bh=bg.toFixed(2)+"~"+ax.toFixed(2)}else{bh=a1*O*0.01;bh=bh.toFixed(2)}aG.push('<span class="f-mallPrice mallPrice" id="realMallAmount">'+(W?bh:Fai.formatPriceEn(bh))+"</span>");aG.push('<span class="fk-mallBuy-big memberPrice">'+(W?h:Fai.formatPriceEn(h))+"</span>")}else{aG.push('	<span class="mallPrice J_realMallAmount" id="realMallAmount">'+(W?a1:Fai.formatPriceEn(a1))+"</span>")}}else{if(bl==12){aG.push('<span class="f-currencyVal">'+an.choiceCurrencyVal+"</span>");aG.push('<span class="mallPrice">'+(W?a1:Fai.formatPriceEn(a1))+"</span>")}else{if(bl==13){aG.push('<span id="mallAmount">'+a1+"</span>")}else{if(bl==16){aG.push('<span id="mallWeight">'+a1+"</span>kg")}else{aG.push(a1)}}}}aG.push("</div>");aG.push("</div>")}if(an.mallOpen){if(an.mallShoppingOptions){if("showOptionList" in a2){var aL=a2.showOptionList||[],a8=a2.oldOptionsStr,aH=aL.length,aC=a2.optionsAmountList||[];if(C){I.each(aC,function(bm,bn){bn.oPrice=bn.oPrice*O*0.01})}for(var bc=0;bc<aH;bc++){var ar=aL[bc],a0=ar.items,bi=ar.fieldKey,aS=0;if(a8){var aQ=a8.split("_");for(var bb=0;bb<aQ.length;bb++){if(bi==aQ[bb]){aS=bb}}}var aq=a0.length;if(aq>0){aG.push('<div class="f-propContent f-optionContent">');aG.push('<div class="f-propName" title="" style="width:'+g+'px">'+Fai.encodeHtml(ar.name)+'<span class="f-colon">:</span></div>');aG.push('<div class="propName" style="display:none;">'+Fai.encodeHtml(ar.name)+"</div>");aG.push('<div class="f-optionValue" style="width:'+(318-g)+'px">');aG.push('<ul class="optionItemWrap" data="'+ar.fieldKey+'" type="'+ar.type+'">');for(var bb=0;bb<aq;bb++){var aJ=a0[bb];var aB=aJ.i,aZ=aJ.v,bj=aJ.path,aU=false;if(aC){for(var ba=0;ba<aC.length;ba++){var aX=aC[ba];var aR=aX.t2;var a6;if("flag" in aX){a6=aX.flag}else{a6=1}var a7=aR.split("_");if(a6==1&&aS<a7.length&&a7[aS]==aB){aU=true;break}}}if(aU){aG.push('<li class="optionItem">');if(bj){aG.push('<span class="img-n">'+Fai.encodeHtml(aZ)+"</span>");var a3=aJ.orgPic;if(a3){aG.push('<img class="i-img J-item J-item-img" src="'+bj+'" data="'+aB+'" _fk-org="'+a3+'" faiWidth="'+aJ.faiWidth+'" faiHeight="'+aJ.faiHeight+'"/>')}else{aG.push('<img class="i-img J-item J-item-img" src="'+bj+'" data="'+aB+'"/>')}}else{aG.push('<a class="J-item oItem" href="javascript:;" hidefocus="true" data="'+Fai.encodeHtmlAttr(aB)+'">');aG.push("<span>"+Fai.encodeHtml(aZ)+"</span>");aG.push("</a>")}aG.push('</li">')}}aG.push("</ul>");aG.push("</div>");aG.push("</div>")}}}}if(!aj.hiddenBuybtn){var aw=1;var aT="";var a5="";if(a2.limitAmount_mall){var au=0;var aA=a2.productRestrictInfo;if(aA){if(aA.count){au=aA.count}}var aK=0,aN=a2.minAmount,be=a2.maxAmount;aK=be-au;if(Fai.fkEval(aK)<0){aK=-1}if(aN>1&&be!=0){a5="( "+LS.minAmount+" : "+aN+" ; "+LS.maxAmount+" : "+aK+" )";aT=' _min="'+aN+'" _max="'+aK+'" '}else{if(aN==1&&be!=0){a5="("+LS.maxAmount+" : "+aK+" )";aT='" _max="'+aK+'" '}else{if(aN>1&&be==0){a5="( "+LS.minAmount+" : "+aN+")";aT=' _min="'+aN+'" '}}}aw=aN}aG.push('<div class="f-propContent f-countContent">');aG.push('<div class="f-propName" title="" style="width:'+g+'px">'+LS.amountNum+'<span class="f-colon">:</span></div>');aG.push('<div class="f-propValue f-countValue" style="width:'+(318-g)+'px">');aG.push('<input id="cartbuyCountPdSlide" type="text" class="f-cartCountInput" onkeypress="javascript:return Fai.isNumberKey(event);" onchange="Site.mallBuyCountChange(\'PdSlide\')" value="'+aw+'" '+aT+"/>");aG.push('<div class="f-buyCountBtn">');aG.push('<span id="buyCountDesPdSlide" class="f-countBtn mallJia disableMallJian" onclick="Site.desMallBuyCount(\'PdSlide\')"></span>');aG.push('<span id="buyCountIncPdSlide" class="f-countBtn mallJian" onclick="Site.incMallBuyCount(\'PdSlide\')"></span>');aG.push("</div>");aG.push('<span id="limitAmountDiv" class="f-limitAmountDiv" title="'+a5+'">');aG.push(a5);aG.push("</span>");aG.push("</div>");aG.push("</div>")}}aO.push('<div class="f-productNameContent">');aO.push('	<p class="f-productName">');if(aj.titleClick){aF=an.productDetailUrl+"?id="+bf.id;aO.push('<a class="f-productTitle" href="'+aF+'" target="_blank">');aO.push(aM);aO.push("</a>")}else{aO.push(aM)}aO.push("	</p>");aO.push("</div>");aO.push('<div class="f-underlineContent">');aO.push('<div class="f-underline"></div>');aO.push("</div>");aO.push('<div class="f-propListContent">');aO.push(aG.join(""));aO.push("</div>");return aO.join("")}function Q(aq){var ap=false,ar;if(aq==null){return ap}len=aq.length;for(i=0;i<len;i++){ar=aq[i];type=ar.type;value=ar.value||"";if(I.trim(value).length<1){continue}if(type==11){ap=true;break}}return ap}function ac(){if(!an.mallOpen){return}if(aj.hiddenBuybtn){return}var ar=[],av=S.dom,aq=an.addCartText||"",at=an.buyNowText||"",au=an.addCartClickEvent||"",ap=an.buyNowClickEvent||"";ar.push('<div class="f-buyContent">');ar.push('	<a href="javascript:;" onclick="'+au+'" hidefocus="true" class="fk-mall-addCart f-addCart"><span>'+aq+"</span></a>");ar.push('	<a href="javascript:;" onclick="'+ap+'" hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img">&nbsp;</span><span>'+at+"</span></a>");ar.push("</div>");return ar.join("")}function A(ap){ap.push('<div class="f-albumsWrap J_albumsWrap">');ap.push("</div>");ap.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>');ap.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}function E(){var au=S.dom,aw=S.data;au.productDetailContent.empty();au.productDetailContent.append(R());au.productBuyContent.empty();au.productBuyContent.append(ac());var ap=S.data.nowData;if(ap){var az=ap.optionsAmountList,at=ap.relateAmount,aA=ap.mallPrice,ay=ap.productRestrictInfo,aq=ap.limitAmount_options,aC=ap.oldOptionsStr,ar=ap.newOptionsStr,aB=ap.limitAmount_mall,ax=ap.minAmount,av=ap.maxAmount;Site.initProductRestrict("PdSlide",aB,ax,av,ay);if(an.mallShoppingOptions&&typeof(az)!="undefined"){if(!aC){aC="null"}var aD=ap.salePromotion;if(typeof(aD)!="undefined"){Site.salePromotionDetail.salePromotionParam=aD}Site.initProductOptions("PdSlide",az,at,aA,aq,ay);Site.initOptionsStr(aC)}}if(Fai.top._manageMode){p()}}function ao(){var aq=S.dom,ap=S.data;nowData=ap.nowData,multiContentRight=aq.multiContentRight,propList=nowData.propList||[],saleId=typeof(nowData.saleId)!="undefined"?nowData.saleId:0,salePromotion=typeof(nowData.salePromotion)!="undefined"?nowData.salePromotion:[],showSaleCountDownFlag=false,beginTime="",endTime="";an.saleShowType=1;if(salePromotion!=null&&salePromotion!=[]){showSaleMsg=true;findPriceFlag=Q(propList);if(findPriceFlag==true){showSaleCountDownFlag=N(salePromotion,true);if(!showSaleCountDownFlag){multiContentRight.find(".J_saleProTimeCount").remove();beginTime=salePromotion.beginTime;endTime=salePromotion.endTime;if(beginTime==null||beginTime==""||endTime==null||endTime==""){V(salePromotion)}}}}}function B(aF,aK,aq,au){var av=[],aJ=S.dom,aD=aJ.multiContentRight,aC="",aL=LS.salePromotionBegin,aB=LS.salePromotionEnd,ax=0,az="g_stress mallPriceBig",aH="g_minor mallMarketPrice",ar,aI,at,aw,ay,aE,aA,ap,aG;if(aq==1){aC=aL;ax=aF}else{aC=aB;ax=aK}if(aq=="2"){V(au)}clearInterval(an.saleCountTimeInterval);an.saleCountTimeInterval=setInterval(function(){ar=parseInt(ax/(3600*24));aI=parseInt(ax/3600)-(ar*24);at=parseInt(ax/60)-(ar*24*60)-(aI*60);aw=parseInt(ax%60);ax--;ay=Fai.format(aC,ar,aI,at,aw);aD.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+ay);if(ax<0){if(aq==1){ax=aK;aC=aB;aq=2;V(au)}else{clearInterval(an.saleCountTimeInterval);aD.find(".J_saleRemove").remove();if(au.other.ruleData.s=="1"){aD.find(".J_newMallPriceClass").find(".f-propValue").addClass(az);aD.find(".J_newMallPriceClass").find(".f-propValue").removeClass(aH);aD.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice")}}}},1000)}function N(aw,au){var aq=false,ap=aw.beginTime,ar=aw.endTime,av=new Date().getTime()+an.timeDiff,at,ax;if(typeof(ap)=="undefined"||ap==null||ap==""||typeof(ar)=="undefined"||ar==null||ar==""){return aq}at=new Date(ap.replace(/-/g,"/")).getTime();ax=new Date(ar.replace(/-/g,"/")).getTime();if(at>av||ax>av){aq=true}if(au){if(at>av){B(parseInt((at-av)/1000),parseInt((ax-at)/1000),1,aw)}else{if(ax>av){B(parseInt((at-av)/1000),parseInt((ax-av)/1000),2,aw)}}}return aq}function V(ax){if(an.saleShowType!="1"){return}an.saleShowType=2;var ay=[],aq=[],aI=S.dom,aG=aI.multiContentRight,aJ="g_stress mallPriceBig f-mallPriceWrap",au="g_minor mallMarketPrice f-mallPriceWrap",aB,aC,az,av,ap,aD,aK=[],at,aF="";if(typeof(ax)=="undefined"||ax==null||ax==""){return}var aE=aG.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(typeof(aE)=="undefined"||aE==null||aE==""){aE="#cf0000"}if(ax.saleType=="1"){av="";ap=parseFloat(ax.other.ruleData.d[0].m);aD=I(".J_mallPriceClass").find(".f-propName").attr("title");var aA=I(".J_mallPriceClass").find(".mallPrice").html();if(aA.indexOf("~")>0){var aw=aA.split("~");var ar=parseFloat(aw[0]);if(isNaN(ar)){ar=0}aK.push(ar);ar=parseFloat(aw[1]);if(isNaN(ar)){ar=0}aK.push(ar)}else{var ar=parseFloat(aA);if(isNaN(ar)){ar=0}aK.push(ar)}for(var aH=0;aH<aK.length;aH++){at=0;if(ax.other.ruleData.s=="1"){av=Fai.format(LS.salePromotionDisCount,ap);at=aK[aH]*(ap/10)}else{av=Fai.format(LS.salePromotionLapse,ap);at=aK[aH]-ap}if(isNaN(at)||at<0){at=0}if(aH>0){aF+="~"}aF+=at.toFixed(2)+""}I(".J_mallPriceClass").find(".f-propValue").addClass("fk-saleRelative");aq.push('<div class="f-propContent J_newMallPriceClass">');aq.push('<div class="f-propName" title="'+aD+'" style="width:'+g+'px">'+aD+'<span class="f-colon">:</span></div>');aq.push('<div class="f-propValue '+au+'">');aq.push('<span class="f-currencyVal">'+an.choiceCurrencyVal+"</span>");aq.push('<span class="mallPrice">'+aA+"</span>");aq.push("</div>");aq.push("</div>");I(".J_mallPriceClass").before(aq.join(""));I(".J_mallPriceClass").find(".f-propName").html(LS.promotionPrice+"<span class='f-colon'>:</span>");I(".J_mallPriceClass").find(".mallPrice").html(aF);I(".J_mallPriceClass").find(".f-propName").attr("title",LS.promotionPrice);I(".J_mallPriceClass").addClass("J_saleRemove");ay.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>');ay.push('<td class="fk-saleTdSty1">');ay.push('<div  class="f-trangle " style="border-bottom: 5px solid '+aE+';">');ay.push("</div>");ay.push("</td>");ay.push('<td class="fk-saleTdSty2">');ay.push('<div class="f-rect" style="background-color:'+aE+';"  title="'+ax.name+'">');ay.push(av);ay.push("</div>");ay.push("</td>");ay.push("</tr></table></span>");I(".J_mallPriceClass").find(".f-propValue").append(ay.join(""))}else{aB=ax.other.ruleData.d.length;aC=aB*20+(aB-1)*12+"px";ay.push('<div class="f-propContent J_saleRemove">');ay.push('<div class="f-propName" title="'+LS.salePromotionName+'" style="height:'+aC+";width:"+g+'px">'+LS.salePromotionName+'<span class="f-colon">:</span></div>');ay.push('<div class="f-propValue fk-saleRelative" style="height:'+aC+'">');ay.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+ax.name+'">');for(var aH=0;aH<aB;aH++){if(aH!=0){az="top:"+(aH*30)+"px"}else{az="top:0"}ay.push('<span class="fk-saleAbsolute" style="'+az+'">');ay.push('<span class="saleFullReBg" style="margin:0;background-color:'+aE+';">');ay.push(Fai.format(LS.salePromotionOnlyFullReduce));ay.push("</span>");ay.push('<span style="margin:0;color:'+aE+'">');if(W){ay.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,ax.other.ruleData.d[aH].m,ax.other.ruleData.d[aH].n))}else{ay.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,Fai.formatPriceEn(ax.other.ruleData.d[aH].m,null,true),Fai.formatPriceEn(ax.other.ruleData.d[aH].n,null,true)))}ay.push("</span>");ay.push("</span>")}ay.push("</span>");ay.push("	</div>");ay.push("</div>");aG.find(".J_mallPriceClass").after(ay.join(""))}Site.showSalePromotionDl();if(Fai.top._manageMode){p()}}function u(ar){var at=S.data,aq={src:"",width:-1,height:-1},ap={};I.extend(ap,aq,ar);L(ap)}function ae(){var at=S.data,ar=at.nowData,au,aq,ap;if(ar){au=ar.picPath;aq=ar.picwidth;ap=ar.picHeight;u({src:au,width:aq,height:ap})}}function L(av){var at=S.dom,aq=at.productImg,ap=av.src||"",ax=390,ay=390,au=new Image(),aw=aq.find(".J_nowImg"),ar,az;if(I.trim(ap).length<1){Fai.ing("找不到该图片",true)}if(aw.length>0){if(aw.attr("src")==I.trim(ap)){return}}aq.empty().append('<div class="f-productImgLoading"></div>');if(T&&T.onload){T.onload=function(){}}au.onload=function(){var aF=false,aE=false,aB="",aD=[],aC=[],aA,aG;ar=au.width;aA=ar;az=au.height;aG=az;if(ar>=az&&ar>ax){aF=true;aA=ax}else{if(az>ay){aE=true;aG=ay}}if(aF){aB+="width:"+aA+"px;"}if(aE){aB+="height:"+aG+"px;"}if(aF&&!aE){aG=ax*au.height/au.width}if(!aF&&aE){aA=ay*au.width/au.height}if(!aj.picZoom&&!aj.picPopupPD){aC.push('	<a class="f-imgClick" href="'+(an.productDetailUrl+"?id="+S.data.id)+'" target="_blank" title="点击进入产品详情页面">');aC.push('		<img class="J_nowImg " src="'+ap+'" style="'+aB+'" />');aC.push("	</a>")}else{aC.push('	<img class="J_nowImg " src="'+ap+'" style="'+aB+'" />')}aD.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">');aD.push("	<tr>");aD.push("		<td>");aD.push(aC.join(""));aD.push("		</td>");aD.push("	</tr>");aD.push("</table>");if(aj.picZoom){aC=[];aC.push(aD.join(""));aD=[];aD.push('<div class="cloud-zoom f-imgWrap" href="'+ap+'">');aD.push(aC.join(""));aD.push("</div>")}aq.empty();aq.append(aD.join(""));if(aj.picZoom){aw=aq.find(".cloud-zoom");aw.attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+ax+", maxHeight:"+ay+',position:"inside"');aw.CloudZoom({imageHeight:az,imageWidth:ar});if(!aj.picPopupPD){setTimeout(function(){aq.find(".mousetrap").append('<a href="'+(an.productDetailUrl+"?id="+S.data.id)+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看产品详情"></a>')},30)}}};T=au;setTimeout(function(){au.src=ap},50)}function b(ar){var ax=[],ay=[],aB=68,az=0,aw=S.data,ar=aw.id,aD=false,aE="",aC="",aq=0,au=0,ap,at,av,aA;aA=w.length;for(av=0;av<aA;av++){if(w[av].id==ar){ap=w[av];aD=true;break}}if(!aD){return""}at=ap.picPathList||[];aA=at.length;for(av=0;av<aA;av++){aE=at[av].thumbPath;aC=at[av].path;aq=at[av].picWidth;au=at[av].picHeight;ay.push("<li>");ay.push('	<a href="javascript:;" class="J_pic" onclick="return false;" path="'+aC+'" picwidth="'+aq+'" picheight="'+au+'" >');ay.push('		<img src="'+aE+'" style="display: block; width:60px; height:60px;" />');ay.push("	</a>");ay.push("</li>");az+=aB}ax.push('			<div class="f-imgListOuter J_imgListOuter">');ax.push('				<ul class="f-imgList J_imgList" style="width:'+az+'px;" _num="0">');ax.push(ay.join(""));ax.push("				</ul>");ax.push("			</div>");return ax.join("")}function a(){var ar=S.dom,aq=S.data,ap=ar.groupBtn;ap.left.removeClass("f-BtnDisabled f-BtnEnabled");ap.right.removeClass("f-BtnDisabled f-BtnEnabled");ar.imgListWrap.empty();ar.imgListWrap.append(b(aq.id));ar.imgListOuter=ar.imgListWrap.find(".J_imgListOuter");ar.imgList=ar.imgListWrap.find(".J_imgList");ar.imgList.find(".J_pic").hover(function(){u({src:I(this).attr("path"),width:I(this).attr("picwidth"),height:I(this).attr("picheight")})})}function v(){var au=[],av=[],ap=90,ay=0,ar,ax,aq;if(w&&w.length>0){for(var at=0,aw=w.length;at<aw;at++){ar=w[at];ax=ar.picThumbPath||"";aq=ar.id;av.push("<li>");av.push('	<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+aq+'">');av.push('		<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+aq+'" _id="'+aq+'">');av.push('			<img src="'+ax+'" style="display: block; width:80px; height:80px;" />');av.push("		</a>");av.push('		<div class="f-albumsImgTip"></div>');av.push("	</div>");av.push("</li>");ay+=ap}au.push('<div class="f-albumsOuter J_albumsOuter">');au.push('	<ul class="f-albums J_albums" style="width:'+ay+'px;" _num="0">');au.push(av.join(""));au.push("	</ul>");au.push("</div>")}return au.join("")}function m(){var aq=S.dom,ap;aq.albumsWrap.empty();aq.albumsWrap.append(v());aq.albumsOuter=aq.albumsWrap.find(".J_albumsOuter");aq.albums=aq.albumsWrap.find(".J_albums");aq.albumsImgWrap=aq.albums.find(".J_albumsImgWrap");ap=aq.albums.children().first().outerWidth()||90,aq.albums.find(".J_albumsImg").click(function(){var at=I(this).attr("_id"),ar=c(at);e(at)});z({index:J,visibleNum:2});al()}function o(){var aq=S.dom,ap=S.data;aq.albumsImgWrap.removeClass("f-albumsImgWrap-selected");aq.albumsImgWrap.filter(".J_albumsImgWrap"+ap.id).addClass("f-albumsImgWrap-selected")}function P(aq){var ap=S.dom,au=ap.albums,ay=ap.albumsOuter,ar=ap.albumsBtn,at=0,av={content:au,contentOuter:ay,button:ar,scrollRow:true,visibleNum:2},ax={},aw=aq.changeProduct||false;I.extend(ax,av,aq);if(ax.scrollRow){y(ax)}else{at=am(ax);z({index:at,visibleNum:2});x(at)}Z(ax);I("#fk-productSlidePanel").find(".optionMsg").hide()}function ag(au){var aw=S.dom,av=aw.imgList,ap=aw.imgListOuter,at=aw.groupBtn,ar={content:av,contentOuter:ap,button:at,scrollRow:true},aq={};I.extend(aq,ar,au);y(aq);Z(aq)}function y(au){var ay=au.content,aq=ay.children(),aw=aq.length,ax=aq.first().outerWidth(),av=au.contentOuter.width(),aC=parseInt(av/ax),aB=au.visibleNum||0,aA=aC-aB,ar=parseInt((aw-aB)/aA),ap=parseInt(ay.attr("_num"))||0,at=0,az=au.direction;if(aw<=aC){ar=0}else{if((ar*aA-aw)>=0){ar-=1}}if(az){at=ap+1;if(at>ar){at=0;ay.stop(true).animate({left:"0"});ay.attr("_num",at)}else{ay.stop(true).animate({left:-(at*aA*ax)+"px"});ay.attr("_num",at)}}else{at=ap-1;if(at<0){at=ar}ay.stop(true).animate({left:-(at*aA*ax)+"px"});ay.attr("_num",at)}}function z(av){var ar=S.dom,aA=ar.albums,aq=aA.children(),ay=aq.length,az=aq.first().outerWidth(),aw=ar.albumsOuter.width(),aE=parseInt(aw/az),aD=av.visibleNum||0,aC=aE-aD,at=0,ap=parseInt(aA.attr("_num"))||0,au=0,aB=0,ax=av.index;if(aD>parseInt(aE/2)){aD=parseInt(aE/2);aC=aE-aD}if(ay>aE&&ax>=aC){at=parseInt((ay-aD)/aC);if((at*aC-ay)>=0){at-=1}au=parseInt((ax-aD)/aC);aB=parseInt(ax/aC)}else{at=0;au=0;aB=0}if(au>at){au=0}else{if(au<0){au=at}}if(ap==au||ap==aB){return}aA.stop(true).animate({left:-(au*aC*az)+"px"});aA.attr("_num",au)}function am(aw){var aA=aw.content,ar=aA.children(),ay=ar.length,az=ar.first().outerWidth(),ax=aw.contentOuter.width(),aq=0,ap=J,aB=aw.direction,aD=0,aC=1,au=aw.cycle||false,at,av;at=ay-(ay%aC);if(aB){av=ap+aC;if(av<at){aD=av}else{if(ap>at){aD=0}else{if(at==ay){aD=at-1;if(au){aD=0}return aD}if(at==ap){aD=at;return aD}aD=at}}}else{av=ap-aC;if(av>aq){aD=av}else{if(ap<aq){aD=0}else{aD=aq;if(aq==ap){if(au){aD=ay-1}return aD}}}}return aD}function Z(au){var az=au.content,aq=az.children(),ax=aq.length,ay=aq.first().outerWidth(),av=au.contentOuter.width(),aw=au.button,aC=parseInt(av/ay),aB=au.visibleNum||0,aA=aC-aB,ar=parseInt((ax-aB)/aA),ap=parseInt(az.attr("_num"))||0,at=0;if(ax<=aC){ar=0}else{if((ar*aA-ax)>=0){ar-=1}}at=ap+1;if(at>ar){at=0;aw.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{aw.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}at=ap-1;if(at<0){aw.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{aw.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}}function al(){var aw=S.dom,av=aw.albums,ap=aw.albumsOuter,au=aw.albumsBtn,at=0,ar={content:av,contentOuter:ap,button:au,scrollRow:true},aq={};I.extend(aq,ar,{scrollRow:true});Z(aq)}function af(){var av=S.dom,au=av.imgList,ap=av.imgListOuter,at=av.groupBtn,ar={content:au,contentOuter:ap,button:at,scrollRow:true},aq={};I.extend(aq,ar,{scrollRow:true});Z(aq)}function ai(ar){var at=[],aq,ap;at.push(ar.qsUrl);at.push("&cmd=list");I.ajax({type:"get",cache:false,url:Site.genAjaxUrl("productSlide_h.jsp")+at.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aw){var au=I.parseJSON(aw),av=S.data;if(au.success){w=au.list;aj=au.setInfo;an=au.data;aa=an.css;O=an.levelDiscount;r=an.memberPrice;t=an.proIndepDisc;h=an.memberPriceLabel;g=aj.prop2;if(Fai.top._manageMode){F=au.itemList}if(w.length<1){Fai.ing("没有产品信息");return}aq=new Date().getTime();ap=an.svrTimeLong;an.timeDiff=ap-aq;an.saleShowType=1;an.saleCountTimeInterval="";if(an.productId==-1){av.id=w[0].id}else{av.id=an.productId}J=c(av.id);if(J==-1){Fai.ing("没有该产品信息");return}else{av.nowData=w[J]}q()}else{Fai.ing("获取数据失败",false)}}})}function l(){if(!aj.shareShow){return}S.dom.shareContent.addClass("f-shareContentIniting");clearTimeout(k);k=setTimeout(function(){var ap=[];ap.push("cmd=share");ap.push("&id="+S.data.id);ap.push("&browserTitle="+Fai.top.document.title);I.ajax({type:"post",url:Site.genAjaxUrl("productSlide_h.jsp"),data:ap.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",false)},success:function(at){var ar=I.parseJSON(at),au=S.dom,aq="";if(ar.success){aq=ar.content||""}else{Fai.ing("获取数据失败",false)}au.shareContent.removeClass("f-shareContentIniting");au.shareContent.empty().append(aq)}})},300)}function c(at){var aq=-1,ar,ap;if(w&&w.length>0){ap=w.length;for(ar=0;ar<ap;ar++){if(w[ar].id==at){aq=ar;break}}}return aq}function x(ap){if(J==ap){return}if(w&&w[ap]){e(w[ap].id)}}function e(ar){var ap=-1,aq=S.data;ap=c(ar);if(ap==-1){Fai.ing("没有该产品信息");return}else{if(ap==J){return}}J=ap;aq.id=parseInt(ar);aq.nowData=w[J];d()}function d(){S.dom.imgList=null;ae();E();ao();a();l();o();setTimeout(function(){ah()},50)}function M(aq){var ap=new Image();ap.src=aq}function ah(){var au=S.data,at=au.nowData,ar=at.picPathList||[],aq,ap;ap=ar.length;for(aq=0;aq<ap;aq++){M(ar[aq].path)}}function ak(){var ap=S.dom;ap.productDetailContent.empty();ap.productBuyContent.empty();ap.productImg.empty();ap.imgListWrap.empty();ap.albumsWrap.empty();ap.shareContent.empty()}function U(){w=null;J=-1;T=null;k=null;an=null;aj=null;O=null;t=null;r=null;h=null;C=false;S.data={};g=82}function j(){var at=S.dom,ap=at.panel,av=at.panelBtn,ar=at.groupBtn,aq=at.albumsBtn,au;av.close.click(function(){Y()});av.left.click(function(){P({scrollRow:false,direction:false,cycle:true,changeProduct:true})});av.right.click(function(){P({scrollRow:false,direction:true,cycle:true,changeProduct:true})});aq.left.click(function(){P({scrollRow:true,direction:false})});aq.right.click(function(){P({scrollRow:true,direction:true})});ar.left.click(function(){ag({scrollRow:true,direction:false})});ar.right.click(function(){ag({scrollRow:true,direction:true})});at.contentBg.click(function(){Y()});at.productPicContent.hover(function(){if(!at.imgList){return}var aw=at.imgList.children();if(aw&&aw.length<2){return}au=setTimeout(function(){at.productImgGroup.slideDown("normal",function(){af()})},250)},function(){clearTimeout(au);at.productImgGroup.slideUp()});at.content.mouseleave(function(){clearTimeout(au);at.productImgGroup.slideUp()})}function K(ap){var aq=S.dom;aq.panel=Fai.top.$("#fk-productSlidePanel");aq.content=aq.panel.find(".J_content");aq.contentBg=aq.panel.find(".J_contentBg");aq.panelBtn={};aq.panelBtn.left=aq.panel.find(".J_turnLeft");aq.panelBtn.right=aq.panel.find(".J_turnRight");aq.panelBtn.close=aq.panel.find(".J_close");aq.multiContent=aq.panel.find(".J_multiContent");aq.albumsContent=aq.panel.find(".J_albumsContent");aq.multiContentLeft=aq.multiContent.find(".J_multiContentLeft");aq.multiContentRight=aq.multiContent.find(".J_multiContentRight");aq.productDetailContent=aq.multiContentRight.find(".J_productDetailContent");aq.productBuyContent=aq.multiContentRight.find(".J_productBuyContent");aq.shareContent=aq.multiContentLeft.find(".J_shareContent");aq.productPicContent=aq.multiContentLeft.find(".J_productPicContent");aq.productImg=aq.multiContentLeft.find(".J_productImg");aq.productImgGroup=aq.multiContentLeft.find(".J_productImgGroup");aq.imgListWrap=aq.multiContentLeft.find(".J_imgListWrap");aq.groupBtn={};aq.groupBtn.left=aq.multiContentLeft.find(".J_groupLeft");aq.groupBtn.right=aq.multiContentLeft.find(".J_groupRight");aq.albumsWrap=aq.albumsContent.find(".J_albumsWrap");aq.albumsBtn={};aq.albumsBtn.left=aq.albumsContent.find(".J_albumsLeft");aq.albumsBtn.right=aq.albumsContent.find(".J_albumsRight");if(typeof ap.func=="function"){setTimeout(function(){ap.func.apply(S,arguments)},30)}}function q(){ad({func:function(){var aq=S.dom;if(aq.panel&&aq.panel.length>0){if(aq.panel.is(":hidden")){aq.panel.show()}}else{Fai.top.$("#fk-productSlidePanel").show()}ae();E();ao();a();m();l();o();setTimeout(function(){ah()},50)}});if(Fai.top._manageMode&&F&&F.length>0){var ap=S.dom.content;ap.off("mousemove.productSlide").on("mousemove.productSlide",function(){Site.addEditLayer("fk-productSlideContent",F,100,{extCls:"fk-productSlideEditLayer"})});ap.off("mouseleave.productSlide").on("mouseleave.productSlide",function(){Site.removeEditLayer("fk-productSlideContent")})}}function Y(){var ap=S.dom;if(Fai.top._manageMode&&F){Site.removeEditLayer("fk-productSlideContent")}ap.panel&&ap.panel.hide();U();S.dom={};f="";aa="";F=null;Fai.top.$("#fk-productSlidePanel").remove()}S.init=function(ap){Y();Fai.top.$("body").append(D().join(""));f=ap;ai({qsUrl:ap});K({func:j})};S.refresh=function(){ak();U();ai({qsUrl:f})};function ad(ap){if(!Site.checkCssLoad(aa)&&I.trim(aa).length>0){Site.demandLoadCss(aa,function(){if(typeof ap.func=="function"){ap.func.apply(S,arguments)}})}else{if(typeof ap.func=="function"){ap.func.apply(S,arguments)}}}function p(){I(".f-propName").attr("class","f-propName paramResize");s();I(".f-propName,.u-paramResize-e,.u-paramResize-w").hover(function(){I(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"})},function(){I(".f-propName").css("border","1px dashed transparent")})}function s(){var ap=I(".f-propListContent ").find(".f-propContent").find(".paramResize");if(ap.length<1){return}ap.each(function(){var ax=I(this),aq=Fai.isIE8()?I(document):I(window),az,aw,at=I(this),av,au={},aB;if(ax.hasClass("paramResize")){ax.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+I(ax).outerHeight()+"px;z-index:999'></div></div>");ax.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+I(ax).outerHeight()+"px;z-index:999'></div></div>");I(".u-paramResize-e,.u-paramResize-w").css("cursor","e-resize")}az=I(ax).prev();aw=I(ax).next();if(!aw.hasClass("u-paramResize-e")||!az.hasClass("u-paramResize-w")){return}az.off("mousedown.fi").on("mousedown.fi",aA);aw.off("mousedown.fi").on("mousedown.fi",aA);function aA(aC){aC=aC||window.event;au.x=aC.pageX;if(I(this).hasClass("u-paramResize-w")){au.dir="w";au.ptb=parseInt(at.css("width"))}else{if(I(this).hasClass("u-paramResize-e")){au.dir="e";au.ptb=parseInt(at.css("width"))}}av=I("#dockTip").show().css({left:"-1000px;",top:"-1000px"});aq.off("mousemove.fi").on("mousemove.fi",ar);aq.off("mouseup.fi").on("mouseup.fi",ay);aC.preventDefault()}function ar(aF){I("body").css("cursor","e-resize");I(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"});aF=aF||window.event;var aG={x:aF.pageX},aD,aI,aC=1,aE=200,aH="";if(au.dir=="w"){aD=au.x-aG.x;aI=au.ptb+aD;aI=aI>aC?aI:aC;aI=aI>aE?aE:aI;aI=Math.round(aI);aH="宽度:"}else{if(au.dir=="e"){aD=aG.x-au.x;aI=au.ptb+aD;aI=aI>aC?aI:aC;aI=aI>aE?aE:aI;aI=Math.round(aI);aH="宽度:"}}aB=aI;I(".f-propName").css({width:aI+"px"});I(".f-optionValue").css({width:(318-aI)+"px"});I(".f-countValue").css({width:(318-aI)+"px"});av.html(aH+aI).css({left:aF.pageX-28,top:aF.pageY-40});aF.preventDefault()}function ay(aD){I("body").css("cursor","");I(".f-propName").css("border","1px dashed transparent");aD=aD||window.event;au.dir="";aq.off("mousemove.fi");aq.off("mouseup.fi");av.hide();au={};var aC=aj.id;var aF="cmd=set&id="+aC+"&style=19&prop0=1&prop2="+aB;var aE=Site.genAjaxUrl("module_h.jsp");Fai.ing("正在保存……",false);I.ajax({type:"post",url:aE,data:aF,error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aH){var aG=I.parseJSON(aH);if(aG.success){Fai.ing("修改宽度成功",true);g=aB}else{Fai.ing(aG.msg,false);I(".J_productDetailContent").find(".f-propContent").find(".paramResize").css("width",g)}}});aD.preventDefault()}})}})(jQuery,Site.productSlide);